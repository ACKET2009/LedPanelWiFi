# Рисование

Устройство может работать в режиме рисования PixelArt на матрице. 
Это неплохое развлечение для детей - рисовать на компьютере или телефоне картинки, 
которые тут же появляются на гирлянде или большой панели.  

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p01.png)  

Все поле на страничке управления разделено на несколько частей  

### Поле рисунка

Размеры поля рисунка соответствуют размерам вашей матрицы. Отображает то, что вы рисуете в данный момент.  
Рисунок может быть загружен из картинок, нарисованных ранее и сохраненных в хранилище. Кроме того в качестве рисунка
может быть загружено то, что в данный момент отображается на матрице - моментальный снимок текущего эффекта.  

### Палитра выбора цвета кисти

Текущий цвет рисование выбирается из палитры тонкой настройки цвета.

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p02.png)  

Выберите в полоске радуги в правой части палитру основной цвет рисования. 
Палитра цвета окрасится в оттенки выбранного основного цвета. 
Выберите в палитре яркость цвета кисти - от черного через оттенки цвета к белому,
и насыщенность - от оттенков серого к яркому, насыщенному цвету.

Текущий цвет отмечен кружком, нарисованным на палитре.

### Палитра предустановленных цветов.

Иногда для рисования проще выбирать один из предустановленных цветов.
Например, когда ваш рисунок не имеет плавных переходов цвета, а создается
в стиле истинного PixelArt с ограниченным набором цветов палитры.  

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p03.png)  

Выбор цвета из палитры предустановленных цветов позволяет гарантированно
выбирать один и тот же цвет точек рисунка, когда вы меняете цвет кисти, а потом возвращаетесь
к использованному ранее для продолжения рисунка.  

Ткните в один из кругов на палитре цвета, и цвет будет выбран.
Текущий выбранный цвет меняет цвет палитры точного выбора цвета на выбранный, а также
отмечается кружком-ореолом вокруг плашки выбранного цвета.  

### Инструменты

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p04.png)  

Палитра инструментов содержит набор кнопок управления процессом рисования. 
Расмотрим предназначение каждой из кнопок.

#### 1. Загрузить

Кнопка **"Загрузить"** ***(1)*** делает моментальный снимок экрана матрицы и передает то, что на ней изображено
в текущий момент в Web-интерфейс в область рисования. В дальнейшем загруженный рисунок можно исправить и
сохранить в качестве слайда в хранилище.

#### 2. Пипетка

Когда в процессе рисования вам требуется выбрать цвет кисти в точности соответствующий цвету одного 
из пикселей картинки - используйте инструмент **"Пипетка"** ***(2)***. 
Выберите значок пипетки в панели инструментов, он будет отмечен тонкой рамкой синего цвета вокруг иконки. 
Инструмент активирован.  

Следующим шагом - ткните в *"пиксель"* на поле рисования. Цвет пикселя будет считан с экрана и
установлен как активный цвет рисования, что отразится на отображаемом цвете в палитре выбора цвета.  

Активный инструмент автоматически переключится с ***пипетки*** на ***кисть***.

#### 3. Кисть

Итак, цвет рисования выбран - в ***палитре*** или инструментом ***пипетка***.
Инструмент **"Кисть"** ***(3)*** активирован - значок кисти обведен тонкой синей рамкой. 
Можно приступать к рисованию.  

Кликайте мышкой (если приложение открыто на ПК) или тыкайте пальцем (если приложение используется на смартфоне)
в поле рисования. Указанный пиксель окрасится в выбранный цвет рисования. 
На матрице цвет выбранного пикселя изменится синхронно с цветом в поле рисования.  

#### 4. Ластик

Если по ошибке какой-то "пиксель" матрицы был окрашен неправильным цветом и вообще не должен "светиться" - 
используйте инструмент **"Ластик"** ***(4)***. Активируйте его в панели инструментов и "сотрите" ненужные
"пиксели" на рисунке.  

Действие ластика на самом деле аналогично действию кисти с черным цветом. Однако, используя инструмент ***ластик***
текущий выбранный цвет в палитре не меняется и вы можете продолжить рисование текущим цветом просто вернувшись
к инструменту ***кисть***.

#### 5. Заливка

В случае если ваш рисунок должен иметь фоном какой-то однородный цвет -  используйте инструмент **"Заливка"** ***(5)***.
Действие инструмента выполняется немедленно при нажатии на значок кнопки и заливает всю область рисования 
текущим выбранным в палитре цветом.  

#### 6. Очистка

Если вы хотите начать новый рисунок и подготовить для этого "чистый холст" - нажмите на кнопку **"Очистка"** ***(6)***
в панели инструмента. Действие выполняется немедленно. Поле рисунка будет очищено и заполнено пикселями черного цвета.  

Все выполняемые действия с рисунком немедленно отображаются на матрице.  

#### 7. Выгрузить.

После того как рисунок закончен в поле рисования - он остается на странице рисования, пока приложение не будет закрыто.
Вы можете сохранить его в хранилище (об этом ниже). Если по какой-то причине вы вернули устройства в демо-режим 
и оно начало воспроизводить очередной эффект - картинка на матрице будет утеряна. Если это произошло - 
вернувшись в режим рисования в можете ***выгрузить*** рисунок из поля рисования обратно на матрицу, 
нажав на кнопку **"Выгрузить"** ***(7)*** в панели инструментов.

### Отражение

Если для рисования узора вам требуется соблюсти симметрию в рисунке - используйте панель **"Отражение"**.  

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p05.png)  

- Активация кнопки **"гориз."** включает режим отражения рисунка по горизонтали. Все пиксели, которые вы окрашиваете
  в области рисунка зеркально дублируются по горизонтали.  

- Активация кнопки **"верт."** включает режим отражения рисунка по вертикали. Все пиксели, которые вы окрашиваете
  в области рисунка зеркально дублируются по вертикали.  

- Активация кнопки **"диаг."** включает режим отражения рисунка по диагонали. Все пиксели, которые вы окрашиваете
  в области рисунка зеркально дублируются по диагонали.  

Режимы отражения действуют независимо и могут быть включены все сразу. Это позволит вам создать полностью 
симметричный узор.  

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p06.png)  

### Хранение

Подготовленные рисунки можно сохранять в хранилище, при необходимости извлекать их оттуда и редактировать.  

Хранилище с рисунками располагается в файловой системе микроконтроллера (во внутренней памяти), 
либо при наличии подключенного модуля SD-карты - соответственно в папке файловой системы SD-карты.  

![Draw](https://github.com/vvip-68/LedPanelWiFi/blob/main/wiki/Draw/p07.png)  

Место хранения выбирается радио-кнопками ***(1)***.

После того, как хранилище выбрано, происходит поиск картинок в выбранном хранилище и составляется список найденных.  

Хранилище - папка с именем ***WxH***, где **W** - ширина матрицы, **H** - высота матрицы. Так для матрицы размером *16х16**
имя папки будет соответственно **16x16**. Таким образом картинки для разных размеров матрицы не смешиваются в 
хранилище и список будет всегда актуальным для текущей матрицы.  

Список найденных картинок отображается в комбобоксе **Картинка** ***(2)***. Выбранная из списка картинка может быть
загружена в область рисование нажатием на кнопку **"Открыть"** ***(3)*** и далее отправлена на матрицу кнопкой
***Выгрузить*** в панели инструментов.  

Если картинка больше не нужна в хранилище - нажмите на кнопку **"Удалить"** ***(4)***. Выбранная в списке картинка будет удалена
из хранилища, после подтверждения выполнения действия.  

Нарисованная картинка может быть сохранена в хранилище. Для этого в поле **"Сохранить"** ***(5)*** введите имя картинки и
нажмите на кнопку ***(6)*** справа от поля ввода.  

Имя файла должно состоять из букв латинского алфавита и цифр. Длина имени - до 16 символов. Если имя содержит
недопустимые символы или превышает допустимую длину - кнопка **"Сохранить"** ***(6)*** будет недоступна.

### Эффект "Слайды"

Картинки из хранилища используются для слайд-шоу в эффекте ***"Слайды"***.  
Если картинок под текущий размер не найдено - для эффекта *"Слайды"* используются картинки из папки ***16x16***
хранилища, которые идут в комплекте проекта по умолчанию. Если эта папка не находится в хранилище - в качестве картинок эффекта *"Слайды"*
используются картинки пиктограмм погодных условий из эффекта ***"Погода"***.


